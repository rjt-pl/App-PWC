=head1 NAME

App::PWC::Stats - Main statistics object for App::PWC

=head1 USE WITH App::PWC

    use App::PWC;
    my $pwc      = App::PWC->new( %options );

    my $json     = $pwc->stats->language_graph;

    my $realname = $pwc->users->realname('ryan-thompson'); # "Ryan Thompson"
    my $members  = $pwc->users->members; # $members{'username'} = 'Real Name';
    my $guests   = $pwc->users->guests;  # as above

=head1 DESCRIPTION

This module handles the statistics (chargs) generation for L<App::PWC>.

=head1 CONSTRUCTOR

=head2 new( %options )

Creates a new statistics object. B<If you are using App::PWC, you do not
need to do call this constructor directly.>

    my $users = App::PWC::Stats->new ( pwc => $app_pwc_object )

=head1 METHODS

=head2 write_chart ( %options )

Creates JSON code for a L<Chart.js> chart, for inclusion on the
L<https://theweeklychallenge.org/chart> page.

Normally you would instead call one of the other helper methods
to generate the actual chart, but this will do the trick for you
if you need something custom. However, please consider submitting
your code as a pull request to this module if it's worth including!

    my @data_sets = map { 
        # TODO example data format
    } $pwc->stats->weeks

    $pwc->stats->write_chart(
        id       => 'submissions_v_time',
        type     => 'line',
        tension  => 0.4,         # Smoothing
        title    => 'Submissions over Time',
        y_name   => 'Submissions',
        x_name   => 'Date',

        data     => \@data_sets;
    );

=head1 DIAGNOSTICS

=head2 Errors

This module will C<croak()> if the C<members.json> or C<guests.json> files
cannot be read, or are in an invalid format of some kind.

Otherwise, nonexistent usernames will return C<undef> as described in the
method.

=head2 Warnings

There are currently no warnings generated by this module. That may change in
the future, and those warnings will be signaled via C<carp()>.

=head1 AUTHOR

B<Ryan Thompson> E<lt>rjt@cpan.orgE<gt>

=head1 COPYRIGHT AND LICENSE

Copyright 2024 Ryan Thompson

This program is free software; you can redistribute it
and/or modify it under the same terms as Perl itself.

L<http://dev.perl.org/licenses/artistic.html>
